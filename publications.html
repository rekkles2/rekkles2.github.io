---
layout: default
title : Publications
navbar_title: Publications
body_attr: >-
  data-spy="scroll" data-target="#navbar-year" data-offset="100"
---

{% assign pubs_by_year = site.publications | sort: "date" | reverse | group_by_exp: "item", "item.date | date: '%Y'" %}

<div class="container mx-auto px-4 py-8 bg-gray-50">
    <div class="flex flex-col lg:flex-row gap-8">
        <!-- 主内容区域，保持加宽 -->
        <div class="w-full lg:w-19/20">
            {% for year in pubs_by_year %}
            {% assign num_papers = year.items | size %}
            <h2 class="text-3xl font-semibold text-gray-800 pt-8 pb-4 border-b-2 border-gray-200" id="year-{{ year.name }}">{{ year.name }}</h2>
            <div class="space-y-6">
                {% for item in year.items %}
                <div class="publication-item bg-white shadow-lg rounded-xl overflow-hidden hover:shadow-xl transition-all duration-300 ease-in-out transform hover:-translate-y-1">
                    {% include widgets/publication_item.html item=item hide_bottom_border=forloop.last first=forloop.first last=forloop.last %}
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>

        <!-- 右侧年份导航，保持原本 sticky + nav-pills 结构 -->
        <div class="w-full lg:w-1/20 hidden lg:block">
            <div id="navbar-year" class="nav nav-pills flex-column sticky top-24 year-card-shell">
                {% for year in pubs_by_year %}
                <a class="nav-link year-pill" href="#year-{{ year.name }}">{{ year.name }}</a>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<style>
/* =========================
   1. 出版物卡片（保持原逻辑）
   ========================= */
.publication-item {
    padding: 2rem;
    border-radius: 14px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    border: 1px solid rgba(0, 0, 0, 0.05);
    display: flex;
    flex-direction: row;
    align-items: flex-start;
}
.publication-item:hover {
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.1);
    transform: translateY(-3px);
}

/* 图片与文本区域（保持你上次比例逻辑） */
.publication-item .pub-image-container {
    width: 42%;
    margin-right: 1.75rem;
    display: flex;
    justify-content: center;
}
.publication-item .pub-image-container img {
    width: 100%;
    max-width: 450px;
    height: auto;
    object-fit: contain;
    border-radius: 8px;
    transition: transform 0.3s ease;
}
.publication-item:hover .pub-image-container img {
    transform: scale(1.04);
}
.publication-item .pub-content {
    width: 58%;
}

/* =========================
   2. 右侧年份时间轴美学（结构/功能不变）
   ========================= */

/* 外壳卡片：白底 + 轻描边 + 轻阴影，作为时间轴容器 */
.year-card-shell {
    position: relative;                 /* 让伪元素定位基于容器 */
    background-color: #ffffff;
    border-radius: 12px;
    border: 1px solid rgba(0,0,0,0.06);
    box-shadow:
        0 18px 40px rgba(0,0,0,0.07),
        0 1px 0 rgba(255,255,255,0.8) inset;
    padding: 12px 8px;
    min-width: 64px;                    /* 确保至少一行文字有空间 */
    max-width: 80px;                    /* 贴合 5% 窄栏 */
    margin-right: 20px;
    text-align: center;
    gap: 6px;
    overflow: visible;
}

/* 中心竖线（时间轴主线） */
.year-card-shell::before {
    content: "";
    position: absolute;
    left: 50%;
    top: 10px;
    bottom: 10px;
    width: 2px;
    transform: translateX(-50%);
    background: linear-gradient(180deg,#e5ecff 0%, #dbe5ff 50%, #e5ecff 100%);
    border-radius: 1px;
}

/* 年份 pill：作为节点的文本承载；保持 ScrollSpy 可识别 */
.year-card-shell .year-pill {
    position: relative;
    display: flex !important;
    align-items: center;
    justify-content: center;
    padding: 18px 6px 8px;             /* 上方留出圆点空间 */
    margin: 2px 0;
    font-size: 14px;
    line-height: 1.15;
    font-weight: 700;
    color: #334155 !important;         /* 深灰，强对比 */
    background: transparent !important;
    border-radius: 8px;
    border: 1px solid transparent;
    box-shadow: none !important;
    text-decoration: none;
    white-space: nowrap;
    min-height: 36px;                  /* 物理高度，避免“空条” */
    transition: color .15s ease, transform .15s ease, border-color .15s ease, background-color .15s ease;
}

/* 节点圆点 */
.year-card-shell .year-pill::before {
    content: "";
    position: absolute;
    top: 8px;                          /* pill 顶部的小圆点 */
    left: 50%;
    transform: translate(-50%, 0);
    width: 8px;
    height: 8px;
    border-radius: 9999px;
    background: #cbd5e1;               /* 默认浅灰 */
    border: 2px solid #eef2ff;         /* 内圈淡蓝，提升层次 */
    box-shadow: 0 0 0 3px rgba(59,130,246,0.08);
}

/* 悬停：圆点与文字轻微增强 */
.year-card-shell .year-pill:hover {
    color: #1d4ed8 !important;
    border-color: rgba(29,78,216,0.12);
    background-color: #f8fafc !important;
    transform: translateY(-1px);
}
.year-card-shell .year-pill:hover::before {
    background: #60a5fa;
    box-shadow: 0 0 0 4px rgba(59,130,246,0.12);
}

/* 激活节点（ScrollSpy 指示） */
.year-card-shell .year-pill.active {
    color: #0b4aa2 !important;
    background-color: #e9f3ff !important;
    border: 1px solid #cfe5ff !important;
    box-shadow: 0 6px 14px rgba(11,74,162,0.18);
}
.year-card-shell .year-pill.active::before {
    background: #1d4ed8;
    border-color: #bfdbfe;
    box-shadow: 0 0 0 5px rgba(29,78,216,0.18);
}

/* 保持与 Bootstrap 的 active 兼容，确保我们规则优先级更高 */
#navbar-year .nav-link.active {
    background-color: #e9f3ff !important;
    color: #0b4aa2 !important;
    font-weight: 700;
    border-radius: 8px;
    border: 1px solid #cfe5ff !important;
}

/* =========================
   3. 布局宽度 (保持你的比例设定)
   ========================= */
@media (min-width: 1024px) {
    .container {
        max-width: 2400px;
        margin-left: auto;
        margin-right: auto;
    }
    .lg\:w-19\/20 { width: 95%; }
    .lg\:w-1\/20 { width: 5%; }
}

/* 大屏放大图片上限，不影响年份侧栏 */
@media (min-width: 1440px) {
    .container { max-width: 2600px; }
    .publication-item .pub-image-container img { max-width: 500px; }
}
@media (min-width: 1920px) {
    .publication-item .pub-image-container img { max-width: 550px; }
    .publication-item { padding: 2.25rem; }
}
@media (min-width: 2560px) {
    .publication-item .pub-image-container img { max-width: 600px; }
    .publication-item { padding: 2.5rem; }
}

/* 移动端保持之前行为（侧栏在 lg 以下本来就隐藏） */
@media (max-width: 768px) {
    .publication-item {
        padding: 1.5rem;
        margin-bottom: 1.25rem;
        flex-direction: column;
    }
    .publication-item .pub-image-container {
        width: 100%;
        margin-right: 0;
        margin-bottom: 1.25rem;
    }
    .publication-item .pub-content { width: 100%; }
    .publication-item .pub-image-container img { max-width: 300px; }
    .publication-item:hover { transform: none; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    .publication-item:last-child { margin-bottom: 0; }
}
</style>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    new bootstrap.ScrollSpy(document.body, {
        target: '#navbar-year',
        offset: 100
    });
});
</script>
