<div class="row" style="margin-bottom: 1rem;">
    <div class="col">
        <div class="card border-0 shadow-sm bg-white rounded-3 overflow-hidden">
            <div class="card-body p-5">
                <div class="row align-items-start">
                    <div class="col-md-8">
                        <div class="d-flex flex-column flex-md-row align-items-start mb-4">
                            <h1 class="h2 font-weight-bold mb-0 me-md-4">
                                {{ site.data.profile.primary_name }}
                                <span class="text-muted fw-normal fs-5">{{ site.data.profile.secondary_name }}</span>
                            </h1>
                            {% if site.data.profile.portrait_url %}
                            <div class="mt-3 mt-md-0 d-md-none w-100">
                                <div class="d-flex justify-content-end">
                                    <img src="{{ site.data.profile.portrait_url | relative_url }}" class="rounded-circle border border-2" style="height: 80px; width: 80px; object-fit: cover;" alt="Portrait">
                                </div>
                            </div>
                            {% endif %}
                        </div>
                        <div class="text-profile-position mb-3">
                            {% for position in site.data.profile.positions %}
                            <div class="d-flex align-items-center mb-2">
                                {% if position.logo -%}
                                <img src="{{ position.logo | relative_url }}" alt="Logo" class="me-2" style="height: 24px; width: 24px; object-fit: contain;">
                                {%- endif %}
                                <span class="fw-medium">{{ position.name }}</span>
                            </div>
                            {% endfor %}
                        </div>
                        <div class="text-profile-bio mb-4" {% if site.data.profile.short_bio_text_justify %}style="text-align: justify;"{% endif %}>
                            {{ site.data.profile.short_bio }}
                        </div>
                    </div>
                    {% if site.data.profile.portrait_url %}
                    <div class="col-md-4 d-none d-md-block">
                        <div class="position-relative">
                            <img src="{{ site.data.profile.portrait_url | relative_url }}" class="img-fluid rounded-3" style="max-height: 280px; object-fit: cover; width: 100%;" alt="{{ site.data.profile.portrait_caption }}" title="{{ site.data.profile.portrait_caption }}">
                        </div>
                    </div>
                    {% endif %}
                </div>
                <hr class="my-4">
                <div class="row">
                    <div class="col">
                        <div class="d-flex flex-wrap" style="gap: 0.75rem;">
                            <!-- Optimized Buttons Start -->
                            <div class="profile-btn btn-email">
                                <i class="fas fa-at"></i>
                                <span class="email-text user-select-all">{{ site.data.profile.email }}</span>
                            </div>

                            {% if site.data.profile.cv_link %}
                            <a class="profile-btn btn-cv" target="_blank" href="{{ site.data.profile.cv_link | relative_url }}">
                                <i class="fas fa-file-alt"></i>
                                <span>CV</span>
                            </a>
                            {% endif %}

                            {% if site.data.profile.gscholar %}
                                {%- if site.data.profile.gscholar contains 'scholar.google' -%}
                                    {%- assign gscholar_url = site.data.profile.gscholar -%}
                                {%- else -%}
                                    {%- assign gscholar_url = 'https://scholar.google.com/citations?user=' | append: site.data.profile.gscholar -%}
                                {%- endif -%}
                            <a class="profile-btn btn-gscholar" target="_blank" href="{{ gscholar_url }}">
                                <svg class="gscholar-icon-svg" role="img" aria-hidden="true" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#4285F4">
                                    <title>Google Scholar</title>
                                    <path d="M12 24a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm0-24L0 9.5l4.838 3.94A8 8 0 0 1 12 9a8 8 0 0 1 7.162 4.44L24 9.5z"/>
                                </svg>
                                <span>Google Scholar</span>
                            </a>
                            {% endif %}

                            {% if site.data.profile.github %}
                            <a class="profile-btn btn-github" target="_blank" href="https://github.com/{{ site.data.profile.github }}">
                                <i class="fab fa-github"></i>
                                <span>GitHub</span>
                            </a>
                            {% endif %}

                            {% if site.data.profile.twitter %}
                            <a class="profile-btn btn-twitter" target="_blank" href="https://twitter.com/{{ site.data.profile.twitter }}">
                                <i class="fab fa-twitter"></i>
                                <span>Twitter</span>
                            </a>
                            {% endif %}

                            {% if site.data.profile.linkedin %}
                            <a class="profile-btn btn-linkedin" target="_blank" href="https://www.linkedin.com/in/{{ site.data.profile.linkedin }}">
                                <i class="fab fa-linkedin"></i>
                                <span>LinkedIn</span>
                            </a>
                            {% endif %}

                            {% if site.data.profile.orcid %}
                            <a class="profile-btn btn-orcid" target="_blank" href="https://orcid.org/{{ site.data.profile.orcid }}">
                                <i class="fab fa-orcid"></i>
                                <span>ORCID</span>
                            </a>
                            {% endif %}

                            {% if site.data.profile.wechat_qrcode %}
                            <a class="profile-btn btn-wechat" data-toggle="modal" data-target="#modal-wechat">
                                <i class="fab fa-weixin"></i>
                                <span>WeChat</span>
                            </a>
                            {% endif %}
                            <!-- Optimized Buttons End -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- STYLES -->
<style>
    /* --- Base Button System --- */
    .profile-btn {
        display: inline-flex;
        align-items: center;
        padding: 0.5rem 1rem;
        background-color: #f1f5f9; /* A softer, modern light gray */
        color: #334155; /* A softer black for text */
        border: 1px solid transparent;
        border-radius: 0.5rem; /* A slightly larger radius */
        font-weight: 500;
        font-size: 0.9rem;
        text-decoration: none;
        transition: all 0.2s ease-in-out;
        cursor: pointer;
    }

    .profile-btn:hover,
    .profile-btn:focus {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        color: #fff; /* White text on hover for all buttons */
        text-decoration: none;
    }

    /* Icon Styling */
    .profile-btn > i,
    .profile-btn > svg {
        margin-right: 0.6rem;
        width: 20px;
        height: 20px;
        text-align: center;
        font-size: 1.1rem;
        transition: all 0.2s ease-in-out;
    }

    /* Email specific style */
    .email-text {
        font-size: 0.95rem;
        word-break: break-all;
        line-height: 1.5;
        font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
        letter-spacing: -0.1px;
    }

    /* --- Brand Color Theming on Hover --- */

    /* Generic Buttons (Email, CV) */
    .btn-email:hover,
    .btn-cv:hover {
        background-color: #4f46e5; /* A nice indigo */
        border-color: #4f46e5;
    }
    .btn-email > i, .btn-cv > i { color: #4f46e5; }
    .btn-email:hover > i, .btn-cv:hover > i { color: #fff; }

    /* Google Scholar - The "Google Blue" Button */
    .btn-gscholar {
        background-color: #eaf1fb; /* Lighter Google Blue shade */
        color: #4285F4;
    }
    .btn-gscholar:hover {
        background-color: #4285F4;
        border-color: #4285F4;
    }
    .btn-gscholar > svg {
        fill: #4285F4;
    }
    .btn-gscholar:hover > svg {
        fill: #fff;
    }

    /* GitHub */
    .btn-github:hover { background-color: #24292e; border-color: #24292e; }
    .btn-github > i { color: #24292e; }
    .btn-github:hover > i { color: #fff; }

    /* Twitter */
    .btn-twitter:hover { background-color: #1DA1F2; border-color: #1DA1F2; }
    .btn-twitter > i { color: #1DA1F2; }
    .btn-twitter:hover > i { color: #fff; }

    /* LinkedIn */
    .btn-linkedin:hover { background-color: #0A66C2; border-color: #0A66C2; }
    .btn-linkedin > i { color: #0A66C2; }
    .btn-linkedin:hover > i { color: #fff; }

    /* ORCID */
    .btn-orcid:hover { background-color: #A6CE39; border-color: #A6CE39; }
    .btn-orcid > i { color: #A6CE39; }
    .btn-orcid:hover > i { color: #fff; }

    /* WeChat */
    .btn-wechat:hover { background-color: #07C160; border-color: #07C160; }
    .btn-wechat > i { color: #07C160; }
    .btn-wechat:hover > i { color: #fff; }

</style>

{% if site.data.profile.wechat_qrcode %}
<div class="modal fade" id="modal-wechat" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content rounded-3">
            <div class="modal-body p-0 text-center">
                <img src="{{ site.data.profile.wechat_qrcode | relative_url }}" class="img-fluid rounded-3">
            </div>
            {% if site.data.profile.wechat_prompt %}
            <div class="modal-body p-3 bg-light rounded-bottom-3">
                <p class="mb-0 small text-center">{{ site.data.profile.wechat_prompt }}</p>
            </div>
            {% endif %}
            <div class="modal-footer bg-light border-0">
                <button type="button" class="btn btn-primary rounded-pill px-4" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endif %}
